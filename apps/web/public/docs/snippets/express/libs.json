{
  "id": "libs",
  "title": "Libraries",
  "description": "Core libraries and service integrations",
  "subcategories": [
    {
      "id": "servers",
      "title": "Servers",
      "description": "Server implementations for different protocols",
      "snippets": [
        {
          "id": "express-server",
          "name": "express-server",
          "displayName": "Express Server",
          "description": "Production-ready Express HTTP server with graceful shutdown",
          "purpose": "Start an Express server with proper production configuration. Use this as your main server entry point.",
          "features": [
            "Graceful shutdown on SIGTERM/SIGINT",
            "CORS and Helmet pre-configured",
            "Health check endpoint included",
            "Environment-based port configuration"
          ],
          "usage": "import { createServer } from './libs/server';\n\nconst app = createServer();\napp.listen(process.env.PORT || 3000);",
          "output": "libs/server.ts",
          "dependencies": ["express", "cors", "helmet"],
          "command": "npx hanma add express-server"
        },
        {
          "id": "http-server",
          "name": "http-server",
          "displayName": "HTTP Server",
          "description": "Basic HTTP server with Express integration",
          "purpose": "When you need a raw Node.js HTTP server with Express. Useful for WebSocket or HTTP/2 integration.",
          "features": [
            "Native Node.js http.createServer",
            "Express app attachment",
            "Manual server control"
          ],
          "usage": "import { createHttpServer } from './libs/servers/http-server';\n\nconst { app, server } = createHttpServer();\nserver.listen(3000);",
          "output": "libs/servers/http-server.ts",
          "dependencies": ["express"],
          "command": "npx hanma add http-server"
        },
        {
          "id": "socket-server",
          "name": "socket-server",
          "displayName": "Socket.io Server",
          "description": "Real-time WebSocket server with optional JWT auth",
          "purpose": "Add real-time capabilities to your app. Perfect for chat, live updates, and collaborative features.",
          "features": [
            "Socket.io integration with Express",
            "Optional JWT authentication",
            "Room management helpers",
            "Connection/disconnection handlers"
          ],
          "usage": "import { createSocketServer } from './libs/servers/socket-server';\n\nconst io = createSocketServer(httpServer);\nio.on('connection', (socket) => {\n  console.log('Client connected');\n});",
          "output": "libs/servers/socket-server.ts",
          "dependencies": ["socket.io", "jsonwebtoken"],
          "command": "npx hanma add socket-server"
        },
        {
          "id": "graphql-server",
          "name": "graphql-server",
          "displayName": "Apollo GraphQL Server",
          "description": "Apollo Server 4 with Express integration",
          "purpose": "Build a GraphQL API with Apollo Server. Best for complex data requirements and flexible client queries.",
          "features": [
            "Apollo Server 4 setup",
            "Express middleware integration",
            "Context for authentication",
            "Introspection control"
          ],
          "usage": "import { createApolloServer } from './libs/servers/graphql-server';\n\nconst server = await createApolloServer();\nawait server.start();\napp.use('/graphql', expressMiddleware(server));",
          "output": "libs/servers/graphql-server.ts",
          "dependencies": ["@apollo/server", "graphql"],
          "command": "npx hanma add graphql-server"
        },
        {
          "id": "trpc-server",
          "name": "trpc-server",
          "displayName": "tRPC Server",
          "description": "End-to-end typesafe API with tRPC",
          "purpose": "Full-stack TypeScript with automatic type inference. Best for monorepo setups with shared types.",
          "features": [
            "tRPC router with Express adapter",
            "Zod validation built-in",
            "Public and protected procedures",
            "Type export for clients"
          ],
          "usage": "import { appRouter, createContext } from './libs/servers/trpc-server';\n\napp.use('/trpc', trpcExpress.createExpressMiddleware({\n  router: appRouter,\n  createContext\n}));",
          "output": "libs/servers/trpc-server.ts",
          "dependencies": ["@trpc/server", "zod"],
          "command": "npx hanma add trpc-server"
        },
        {
          "id": "grpc-server",
          "name": "grpc-server",
          "displayName": "gRPC Server",
          "description": "High-performance RPC with Protocol Buffers",
          "purpose": "For microservices communication. Best for high-performance, typed service-to-service calls.",
          "features": [
            "gRPC server setup",
            "Proto file loading",
            "Service implementation pattern",
            "Strongly typed definitions"
          ],
          "usage": "import { createGrpcServer } from './libs/servers/grpc-server';\n\nconst server = createGrpcServer();\nserver.bindAsync('0.0.0.0:50051', credentials, () => {\n  server.start();\n});",
          "output": "libs/servers/grpc-server.ts",
          "dependencies": ["@grpc/grpc-js", "@grpc/proto-loader"],
          "command": "npx hanma add grpc-server"
        }
      ]
    },
    {
      "id": "database",
      "title": "Database Clients",
      "description": "Database connections and ORM setup",
      "snippets": [
        {
          "id": "prisma-client",
          "name": "prisma-client",
          "displayName": "Prisma Client",
          "description": "Prisma ORM with singleton pattern",
          "purpose": "Use Prisma ORM with a singleton pattern to prevent connection pool exhaustion in serverless or hot-reload environments.",
          "features": [
            "Singleton pattern for connection reuse",
            "TypeScript types auto-generated",
            "Connection pooling",
            "Works with serverless"
          ],
          "usage": "import { prisma } from './libs/db/prisma';\n\nconst users = await prisma.user.findMany();",
          "output": "libs/db/prisma.ts",
          "dependencies": ["@prisma/client"],
          "command": "npx hanma add prisma-client"
        },
        {
          "id": "drizzle-client",
          "name": "drizzle-client",
          "displayName": "Drizzle Client",
          "description": "Drizzle ORM with PostgreSQL",
          "purpose": "Lightweight, type-safe ORM with excellent performance. Great alternative to Prisma with smaller bundle size.",
          "features": [
            "Drizzle ORM configuration",
            "PostgreSQL connection pool",
            "Type-safe queries",
            "SQL-like syntax"
          ],
          "usage": "import { db } from './libs/db/drizzle';\n\nconst users = await db.select().from(usersTable);",
          "output": "libs/db/drizzle.ts",
          "dependencies": ["drizzle-orm", "pg"],
          "command": "npx hanma add drizzle-client"
        },
        {
          "id": "redis-client",
          "name": "redis-client",
          "displayName": "Redis Client",
          "description": "Redis with ioredis and cache helpers",
          "purpose": "Redis connection with caching utilities. Use for sessions, rate limiting, caching, and pub/sub.",
          "features": [
            "ioredis client setup",
            "Cache get/set helpers",
            "TTL support",
            "Reconnection handling"
          ],
          "usage": "import { redis, cache } from './libs/db/redis';\n\nawait cache.set('key', { data: 'value' }, 3600);\nconst data = await cache.get('key');",
          "output": "libs/db/redis.ts",
          "dependencies": ["ioredis"],
          "command": "npx hanma add redis-client"
        }
      ]
    },
    {
      "id": "queries",
      "title": "Query Storage Classes",
      "description": "Generic CRUD storage classes with pagination",
      "snippets": [
        {
          "id": "prisma-storage",
          "name": "prisma-storage",
          "displayName": "Prisma Storage",
          "description": "Generic Storage class for Prisma with CRUD, bulk ops, pagination",
          "purpose": "Reusable CRUD operations for any Prisma model. Reduces boilerplate for common database operations.",
          "features": [
            "Create, read, update, delete",
            "Bulk operations",
            "Offset and cursor pagination",
            "Type-safe generics"
          ],
          "usage": "import { PrismaStorage } from './libs/queries/prisma-storage';\n\nconst userStorage = new PrismaStorage(prisma.user);\nconst users = await userStorage.findAll({ page: 1, limit: 10 });",
          "output": "libs/queries/prisma-storage.ts",
          "dependencies": ["@prisma/client"],
          "command": "npx hanma add prisma-storage"
        },
        {
          "id": "drizzle-storage",
          "name": "drizzle-storage",
          "displayName": "Drizzle Storage",
          "description": "Generic Storage class for Drizzle ORM",
          "purpose": "Reusable CRUD operations for Drizzle tables. Same pattern as Prisma storage.",
          "features": [
            "Generic CRUD methods",
            "Pagination support",
            "Type-safe operations",
            "Works with any table"
          ],
          "usage": "import { DrizzleStorage } from './libs/queries/drizzle-storage';\n\nconst userStorage = new DrizzleStorage(db, usersTable);\nconst user = await userStorage.findById(1);",
          "output": "libs/queries/drizzle-storage.ts",
          "dependencies": ["drizzle-orm", "pg"],
          "command": "npx hanma add drizzle-storage"
        },
        {
          "id": "pg-storage",
          "name": "pg-storage",
          "displayName": "PostgreSQL Storage",
          "description": "Raw PostgreSQL storage with pg Pool",
          "purpose": "Direct PostgreSQL queries without an ORM. Best for complex queries or performance-critical code.",
          "features": [
            "Raw SQL queries",
            "Connection pooling",
            "Transaction support",
            "Parameterized queries"
          ],
          "usage": "import { PgStorage } from './libs/queries/pg-storage';\n\nconst storage = new PgStorage('users');\nconst users = await storage.query('SELECT * FROM users WHERE id = $1', [1]);",
          "output": "libs/queries/pg-storage.ts",
          "dependencies": ["pg"],
          "command": "npx hanma add pg-storage"
        },
        {
          "id": "mysql-storage",
          "name": "mysql-storage",
          "displayName": "MySQL Storage",
          "description": "Generic Storage class for MySQL",
          "purpose": "CRUD operations for MySQL databases using mysql2 driver.",
          "features": [
            "MySQL connection pool",
            "Prepared statements",
            "CRUD operations",
            "Pagination support"
          ],
          "usage": "import { MysqlStorage } from './libs/queries/mysql-storage';\n\nconst storage = new MysqlStorage('users');\nconst users = await storage.findAll();",
          "output": "libs/queries/mysql-storage.ts",
          "dependencies": ["mysql2"],
          "command": "npx hanma add mysql-storage"
        },
        {
          "id": "sqlite-storage",
          "name": "sqlite-storage",
          "displayName": "SQLite Storage",
          "description": "Generic Storage class for SQLite",
          "purpose": "CRUD operations for SQLite. Great for local development, testing, or embedded databases.",
          "features": [
            "better-sqlite3 sync API",
            "In-memory or file-based",
            "CRUD operations",
            "Transaction support"
          ],
          "usage": "import { SqliteStorage } from './libs/queries/sqlite-storage';\n\nconst storage = new SqliteStorage('users');\nconst user = await storage.create({ name: 'John' });",
          "output": "libs/queries/sqlite-storage.ts",
          "dependencies": ["better-sqlite3"],
          "command": "npx hanma add sqlite-storage"
        },
        {
          "id": "mongodb-storage",
          "name": "mongodb-storage",
          "displayName": "MongoDB Storage",
          "description": "Generic Storage class for MongoDB",
          "purpose": "CRUD operations for MongoDB collections using the native driver.",
          "features": [
            "MongoDB native driver",
            "Collection abstraction",
            "CRUD operations",
            "Aggregation support"
          ],
          "usage": "import { MongoStorage } from './libs/queries/mongodb-storage';\n\nconst storage = new MongoStorage('users');\nconst users = await storage.find({ active: true });",
          "output": "libs/queries/mongodb-storage.ts",
          "dependencies": ["mongodb"],
          "command": "npx hanma add mongodb-storage"
        },
        {
          "id": "sequelize-storage",
          "name": "sequelize-storage",
          "displayName": "Sequelize Storage",
          "description": "Generic Storage class for Sequelize ORM",
          "purpose": "CRUD operations for Sequelize models. Use if your project already uses Sequelize.",
          "features": [
            "Sequelize model integration",
            "CRUD operations",
            "Pagination",
            "Includes support"
          ],
          "usage": "import { SequelizeStorage } from './libs/queries/sequelize-storage';\n\nconst storage = new SequelizeStorage(UserModel);\nconst users = await storage.findAll({ include: ['posts'] });",
          "output": "libs/queries/sequelize-storage.ts",
          "dependencies": ["sequelize"],
          "command": "npx hanma add sequelize-storage"
        }
      ]
    },
    {
      "id": "uploads",
      "title": "File Uploads",
      "description": "Cloud storage with presigned URLs",
      "snippets": [
        {
          "id": "aws-s3",
          "name": "aws-s3",
          "displayName": "AWS S3 Upload",
          "description": "S3 with presigned PUT URLs and POST policies",
          "purpose": "Upload files directly to S3 from the client using presigned URLs. Best for large file uploads.",
          "features": [
            "Presigned PUT URLs",
            "POST policies for browser uploads",
            "Multipart upload support",
            "Signed URL generation"
          ],
          "usage": "import { s3, getPresignedUrl } from './libs/uploads/aws-s3';\n\nconst url = await getPresignedUrl('bucket', 'key', 3600);",
          "output": "libs/uploads/aws-s3.ts",
          "dependencies": ["@aws-sdk/client-s3", "@aws-sdk/s3-request-presigner"],
          "command": "npx hanma add aws-s3"
        },
        {
          "id": "gcp-storage-upload",
          "name": "gcp-storage-upload",
          "displayName": "GCP Storage Upload",
          "description": "Google Cloud Storage with signed URLs",
          "purpose": "Upload files to Google Cloud Storage. Use when on GCP infrastructure.",
          "features": [
            "Signed URL generation",
            "Resumable uploads",
            "Bucket operations",
            "GCP authentication"
          ],
          "usage": "import { storage, getSignedUrl } from './libs/uploads/gcp-storage';\n\nconst url = await getSignedUrl('bucket', 'file.jpg');",
          "output": "libs/uploads/gcp-storage.ts",
          "dependencies": ["@google-cloud/storage"],
          "command": "npx hanma add gcp-storage-upload"
        },
        {
          "id": "azure-blob-upload",
          "name": "azure-blob-upload",
          "displayName": "Azure Blob Upload",
          "description": "Azure Blob Storage with SAS URLs",
          "purpose": "Upload files to Azure Blob Storage. Use when on Azure infrastructure.",
          "features": [
            "SAS URL generation",
            "Container management",
            "Blob operations",
            "Azure authentication"
          ],
          "usage": "import { blobClient, getSasUrl } from './libs/uploads/azure-blob';\n\nconst url = await getSasUrl('container', 'blob.pdf');",
          "output": "libs/uploads/azure-blob.ts",
          "dependencies": ["@azure/storage-blob"],
          "command": "npx hanma add azure-blob-upload"
        },
        {
          "id": "cloudflare-r2-upload",
          "name": "cloudflare-r2-upload",
          "displayName": "Cloudflare R2 Upload",
          "description": "R2 storage with S3-compatible API",
          "purpose": "Zero egress-fee object storage. Drop-in S3 replacement with global edge network.",
          "features": [
            "S3-compatible API",
            "Presigned URLs",
            "Zero egress fees",
            "Workers integration"
          ],
          "usage": "import { r2, getPresignedUrl } from './libs/uploads/cloudflare-r2';\n\nconst url = await getPresignedUrl('bucket', 'key');",
          "output": "libs/uploads/cloudflare-r2.ts",
          "dependencies": ["@aws-sdk/client-s3", "@aws-sdk/s3-request-presigner"],
          "command": "npx hanma add cloudflare-r2-upload"
        },
        {
          "id": "cloudinary",
          "name": "cloudinary",
          "displayName": "Cloudinary Upload",
          "description": "Image/video with transformations",
          "purpose": "Media-focused uploads with on-the-fly transformations. Best for image/video-heavy apps.",
          "features": [
            "Image transformations",
            "Video processing",
            "Auto-optimization",
            "CDN delivery"
          ],
          "usage": "import { cloudinary, uploadImage } from './libs/uploads/cloudinary';\n\nconst result = await uploadImage(file, { folder: 'avatars' });",
          "output": "libs/uploads/cloudinary.ts",
          "dependencies": ["cloudinary"],
          "command": "npx hanma add cloudinary"
        },
        {
          "id": "upload-multer",
          "name": "upload-multer",
          "displayName": "Multer Upload",
          "description": "Local file uploads with Multer",
          "purpose": "Handle multipart form uploads. Use for local file storage or as middleware before cloud upload.",
          "features": [
            "File type validation",
            "Size limits",
            "Memory or disk storage",
            "Multiple file support"
          ],
          "usage": "import { upload } from './libs/upload-multer';\n\napp.post('/upload', upload.single('file'), (req, res) => {\n  res.json({ file: req.file });\n});",
          "output": "libs/upload-multer.ts",
          "dependencies": ["multer"],
          "command": "npx hanma add upload-multer"
        },
        {
          "id": "s3-upload",
          "name": "s3-upload",
          "displayName": "S3 Upload (Legacy)",
          "description": "Legacy S3 upload utility",
          "purpose": "Simple S3 upload helper. Consider using aws-s3 for more complete functionality.",
          "features": [
            "Basic S3 upload",
            "File streaming",
            "Content-type detection"
          ],
          "usage": "import { uploadToS3 } from './libs/s3-upload';\n\nawait uploadToS3(buffer, 'bucket', 'key.jpg');",
          "output": "libs/s3-upload.ts",
          "dependencies": ["@aws-sdk/client-s3"],
          "command": "npx hanma add s3-upload"
        }
      ]
    },
    {
      "id": "mailers",
      "title": "Email Providers",
      "description": "Email sending with multiple providers",
      "snippets": [
        {
          "id": "nodemailer",
          "name": "nodemailer",
          "displayName": "Nodemailer",
          "description": "SMTP email with any provider",
          "purpose": "Universal email transport that works with any SMTP provider. Most flexible option.",
          "features": [
            "SMTP transport",
            "HTML and text emails",
            "Attachments support",
            "Connection pooling"
          ],
          "usage": "import { sendEmail } from './libs/mailers/nodemailer';\n\nawait sendEmail({\n  to: 'user@example.com',\n  subject: 'Hello',\n  html: '<h1>Welcome!</h1>'\n});",
          "output": "libs/mailers/nodemailer.ts",
          "dependencies": ["nodemailer"],
          "command": "npx hanma add nodemailer"
        },
        {
          "id": "resend",
          "name": "resend",
          "displayName": "Resend",
          "description": "Modern email API with React support",
          "purpose": "Modern email API with excellent DX. Supports React Email for templating.",
          "features": [
            "Simple API",
            "React Email support",
            "Delivery tracking",
            "Generous free tier"
          ],
          "usage": "import { resend, sendEmail } from './libs/mailers/resend';\n\nawait sendEmail({\n  to: 'user@example.com',\n  subject: 'Hello',\n  react: <WelcomeEmail name=\"John\" />\n});",
          "output": "libs/mailers/resend.ts",
          "dependencies": ["resend"],
          "command": "npx hanma add resend"
        },
        {
          "id": "sendgrid",
          "name": "sendgrid",
          "displayName": "SendGrid",
          "description": "SendGrid email API with templates",
          "purpose": "Enterprise-grade email with templates and analytics. Best for high-volume sending.",
          "features": [
            "Template support",
            "Analytics dashboard",
            "High deliverability",
            "Marketing campaigns"
          ],
          "usage": "import { sendEmail } from './libs/mailers/sendgrid';\n\nawait sendEmail({\n  to: 'user@example.com',\n  templateId: 'd-xxx',\n  dynamicData: { name: 'John' }\n});",
          "output": "libs/mailers/sendgrid.ts",
          "dependencies": ["@sendgrid/mail"],
          "command": "npx hanma add sendgrid"
        },
        {
          "id": "aws-ses",
          "name": "aws-ses",
          "displayName": "AWS SES",
          "description": "Amazon Simple Email Service",
          "purpose": "Cost-effective email at scale. Best for AWS-native applications.",
          "features": [
            "Pay-per-email pricing",
            "AWS integration",
            "Bounce handling",
            "Dedicated IPs"
          ],
          "usage": "import { sendEmail } from './libs/mailers/aws-ses';\n\nawait sendEmail({\n  to: 'user@example.com',\n  subject: 'Hello',\n  body: 'Welcome to our app!'\n});",
          "output": "libs/mailers/aws-ses.ts",
          "dependencies": ["@aws-sdk/client-ses"],
          "command": "npx hanma add aws-ses"
        }
      ]
    },
    {
      "id": "utilities",
      "title": "Utilities",
      "description": "Common library utilities",
      "snippets": [
        {
          "id": "cors",
          "name": "cors",
          "displayName": "CORS Configuration",
          "description": "Cross-origin resource sharing setup",
          "purpose": "Configure CORS for your API. Essential for frontend applications on different domains.",
          "features": [
            "Origin whitelist",
            "Credentials support",
            "Preflight caching",
            "Custom headers"
          ],
          "usage": "import { corsMiddleware } from './libs/cors';\n\napp.use(corsMiddleware);",
          "output": "libs/cors.ts",
          "dependencies": ["cors"],
          "command": "npx hanma add cors"
        },
        {
          "id": "env-validation",
          "name": "env-validation",
          "displayName": "Environment Validation",
          "description": "Zod-based environment variable validation",
          "purpose": "Validate environment variables at startup. Fail fast if required config is missing.",
          "features": [
            "Zod schema validation",
            "Type-safe env access",
            "Default values",
            "Required field checks"
          ],
          "usage": "import { env } from './libs/env-validation';\n\nconsole.log(env.DATABASE_URL); // Type-safe!",
          "output": "libs/env-validation.ts",
          "dependencies": ["zod"],
          "command": "npx hanma add env-validation"
        },
        {
          "id": "http-client",
          "name": "http-client",
          "displayName": "HTTP Client",
          "description": "Axios-based HTTP client with retries",
          "purpose": "Make HTTP requests with automatic retries and error handling. Use for external API calls.",
          "features": [
            "Automatic retries",
            "Request/response interceptors",
            "Timeout handling",
            "Error transformation"
          ],
          "usage": "import { httpClient } from './libs/http-client';\n\nconst data = await httpClient.get('/api/users');",
          "output": "libs/http-client.ts",
          "dependencies": ["axios"],
          "command": "npx hanma add http-client"
        },
        {
          "id": "sentry",
          "name": "sentry",
          "displayName": "Sentry Integration",
          "description": "Error monitoring with Sentry",
          "purpose": "Track errors and performance in production. Essential for debugging production issues.",
          "features": [
            "Error tracking",
            "Performance monitoring",
            "Release tracking",
            "User context"
          ],
          "usage": "import { initSentry, captureError } from './libs/sentry';\n\ninitSentry();\n\ntry { ... } catch (e) {\n  captureError(e);\n}",
          "output": "libs/sentry.ts",
          "dependencies": ["@sentry/node"],
          "command": "npx hanma add sentry"
        }
      ]
    }
  ]
}
