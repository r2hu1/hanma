---
name: elysia-swagger
description: Swagger/OpenAPI documentation plugin for Elysia
dependencies:
  - "@elysiajs/swagger"
files:
  - name: src/plugins/swagger.ts
---
import type { Elysia } from "elysia";
import { swagger } from "@elysiajs/swagger";

/**
 * Swagger documentation setup for Elysia
 * Only enabled in non-production environments
 */
export const setupSwagger = <T extends Elysia>(app: T) => {
  const isProd = process.env.NODE_ENV === "production";

  if (isProd) {
    return app;
  }

  return app.use(
    swagger({
      documentation: {
        info: {
          title: process.env.npm_package_name || "Elysia API",
          version: process.env.npm_package_version || "1.0.0",
          description:
            process.env.npm_package_description || "API documentation",
        },
        tags: [
          { name: "auth", description: "Authentication endpoints" },
          { name: "users", description: "User management" },
          { name: "health", description: "Health check endpoints" },
        ],
      },
      path: "/docs",
      exclude: ["/docs", "/docs/json"],
    })
  );
};

/* USAGE:

import { Elysia } from "elysia";
import { setupSwagger } from "./plugins/swagger";

const app = new Elysia()
  .use(setupSwagger)
  .get(
    "/users/:id",
    ({ params }) => {
      return { id: params.id };
    },
    {
      detail: {
        summary: "Get user by ID",
        tags: ["users"],
      },
    }
  );

// Access docs at: http://localhost:3000/docs

*/
